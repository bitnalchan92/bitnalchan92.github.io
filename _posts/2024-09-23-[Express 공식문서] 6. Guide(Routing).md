---
title: "[Express ê³µì‹ë¬¸ì„œ] 6. Guide(Routing)"
description: "https://expressjs.com/en/guide/routing.html"
date: 2024-09-23
categories: [express]
tags: [express guide, routing]
---



> [https://expressjs.com/en/guide/routing.html](https://expressjs.com/en/guide/routing.html)
{: .prompt-tip }



# Routing

ë¼ìš°íŒ…ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì—”ë“œí¬ì¸íŠ¸ê°€(URI) í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì— ì‘ë‹µí•˜ëŠ” ë°©ì‹ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ë¼ìš°íŒ…ì— ëŒ€í•œ ì†Œê°œëŠ” [ê¸°ë³¸ ë¼ìš°íŒ…](https://bitnalchan92.github.io/posts/Express-%EA%B3%B5%EC%8B%9D%EB%AC%B8%EC%84%9C-4.-Getting-started(Basic-routing)/)ì„ ì°¸ê³ !



HTTP ë©”ì„œë“œì— í•´ë‹¹í•˜ëŠ” Express `app`ê°ì²´ì˜ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë¼ìš°íŒ…ì„ ì •ì˜í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `app.get()`ì€ GET ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  `app.post()`ëŠ” POSTìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì „ì²´ ëª©ë¡ì€ app.METHODë¥¼ ì°¸ì¡°! app.allì„ ì‚¬ìš©í•´ì„œ ëª¨ë“  ë¼HTTPë¥¼ ì²˜ë¦¬í•˜ê³  app.useë¥¼ ì‚¬ìš©í•´ì„œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì½œë°±í•¨ìˆ˜ë¡œ ì§€ì •í•  ìˆ˜ ìˆìŒ ( ìì„¸í•œ ë‚´ìš©ì€ ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©ì„ ì°¸ì¡°í•˜ì„¸ìš” )

> ë¯¸ë“¤ì›¨ì–´ëŠ” Nestjsì—ì„œ ì‚¬ìš©í•´ë³¸ì  ìˆëŠ”ë°, ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œ ê¹Šê²Œ ì‚´í´ë³´ê¸°ë¡œ í•˜ê³ , ì‰½ê²Œ ë§í•´ì„œ ë‹¨ì–´ ê·¸ëŒ€ë¡œ "ì¤‘ê°„ì²˜ë¦¬ì"ì—­í• ì„ í•˜ëŠ” í•¨ìˆ˜ì •ë„ë¡œ ìƒê°í•˜ë©´ ë ë“¯í•˜ë‹¤. ì–´ë–¤ ìš”ì²­ì— ì‘ë‹µí•˜ê¸° ì „ ì´ ìš”ì²­ì— ëŒ€í•´ ê²€ì¦ì„ í•´ì•¼í•  ë¶€ë¶„ì´ ìˆë‹¤ë©´ ê·¸ ë¶€ë¶„ì— ë¯¸ë“¤ì›¨ì–´ë¥¼ ì ìš©í–ˆë˜ ì ì´ ìˆë‹¤.



ì´ëŸ¬í•œ ë¼ìš°íŒ… ë°©ë²•ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì§€ì •ëœ ê²½ë¡œ(ì—”ë“œí¬ì¸íŠ¸) ë° HTTPë©”ì„œë“œì— ëŒ€í•œ ìš”ì²­ì„ ìˆ˜ì‹ í•  ë•Œ í˜¸ì¶œë˜ëŠ” ì½œë°± í•¨ìˆ˜("í•¸ë“¤ëŸ¬ í•¨ìˆ˜"ë¼ê³ ë„ í•¨)ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ì¦‰, ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì§€ì •ëœ ê²½ë¡œ ë° ë©”ì„œë“œì™€ ì¼ì¹˜í•˜ëŠ” ìš”ì²­ì„ "ìˆ˜ì‹ "í•˜ê³  ì¼ì¹˜ í•­ëª©ì„ ê°ì§€í•˜ë©´ ì§€ì •ëœ ì½œë°± í•¨ìˆ˜(í•¸ë“¤ëŸ¬)ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.



ì‹¤ì œë¡œ ë¼ìš°íŒ… ë©”ì„œë“œëŠ” ë‘˜ ì´ìƒì˜ ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ì½œë°± í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì½œë°± í•¨ìˆ˜ì— ëŒ€í•œ ì¸ìˆ˜ë¡œ `next`ë¥¼ ì œê³µí•œ ë‹¤ìŒ í•¨ìˆ˜ ë³¸ë¬¸ ë‚´ì—ì„œ `next()`ë¥¼ í˜¸ì¶œí•˜ì—¬ ì œì–´ê¶Œì„ ë‹¤ìŒ ì½œë°±ì— ë„˜ê²¨ì£¼ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.



ë‹¤ìŒ ì½”ë“œëŠ” ë§¤ìš° ê¸°ë³¸ì ì¸ ê²½ë¡œì˜ ì˜ˆì…ë‹ˆë‹¤.

```javascript
const express = require('express')
const app = express()

// í™ˆí˜ì´ì§€('/')ì— ëŒ€í•œ GET ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ "hello world"ë¥¼ ì‘ë‹µí•©ë‹ˆë‹¤.
app.get('/', (req, res) => {
  res.send('hello world')
})
```





## Route methods

route methodëŠ” HTTP ë©”ì„œë“œ ì¤‘ í•˜ë‚˜ì—ì„œ íŒŒìƒë˜ë©° `express` í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°ë©ë‹ˆë‹¤. 



ë‹¤ìŒ ì½”ë“œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë£¨íŠ¸( = í™ˆí˜ì´ì§€ì— ëŒ€í•œ Request )ì— ëŒ€í•œ GET ë° POST ë©”ì„œë“œì— ëŒ€í•´ì„œ ì •ì˜í•œ ê²½ë¡œì˜ ì˜ˆì œì…ë‹ˆë‹¤.

```javascript
// GET method route
app.get('/', (req, res) => {
  res.send('GET request to the homepage')
})

// POST method route
app.post('/', (req, res) => {
  res.send('POST request to the homepage')
})
```



ExpressëŠ” ëª¨ë“  HTTP ìš”ì²­ ë©”ì†Œë“œ( `get` , `post` ë“±)ì— í•´ë‹¹í•˜ëŠ” ë©”ì†Œë“œë¥¼ ì§€ì›í•©ë‹ˆë‹¤. ì „ì²´ ëª©ë¡ì€ [app.METHOD](https://expressjs.com/en/4x/api.html#app.METHOD) ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.



ëª¨ë“  HTTP ìš”ì²­ ë©”ì„œë“œì˜ ê²½ë¡œì— ëŒ€í•´ì„œ ë¯¸ë“¤ì›¨ì–´ë¡œì„œì˜ ì—­í• ì„ í•  ìˆ˜ ìˆëŠ” íŠ¹ìˆ˜ Routing Methodì¸ `app.all()`ì´ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ, `GET`, `POST`, `PUT`, `DELETE`ë˜ëŠ” http ëª¨ë“ˆì—ì„œ ì§€ì›ë˜ëŠ” ê¸°íƒ€ HTTP ìš”ì²­ ë°©ë²•ì„ ì‚¬ìš©í•˜ëŠ”ì§€ ì—¬ë¶€ì— ê´€ê³„ì—†ì´ `/secret`ê²½ë¡œì— ëŒ€í•œ ìš”ì²­ì— ëŒ€í•´ì„œ ë‹¤ìŒ í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.

```javascript
app.all('/secret', (req, res, next) => {
  console.log('Accessing the secret section ...')
  next() // pass controll to the next handler ë‹¤ìŒ í•¸ë“¤ëŸ¬ì—ê²Œ í†µì œê¶Œì„ ë„˜ê²¨ì¤˜ì•¼ í•œë‹¤. ìœ„ì˜ ì„¤ëª… ì°¸ê³ !
})
```



## Route paths

ìš”ì²­ ë°©ë²•(Request Method)ì™€ í•¨ê»˜ Route ê²½ë¡œ(Route paths)ëŠ” ìš”ì²­ì´ ì´ë£¨ì–´ì§ˆìˆ˜ ìˆëŠ” ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ( ë‘ê°œê°€ ê²°í•©ë˜ì–´ í•˜ë‚˜ì˜ ì—”ë“œí¬ì¸íŠ¸ê°€ ë¨). ê²½ë¡œëŠ” ë¬¸ìì—´, ë¬¸ìì—´íŒ¨í„´ ë˜ëŠ” ì •ê·œí‘œí˜„ì‹ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 



`?` , `+` , `*` ë° `()` ë¬¸ìëŠ” í•´ë‹¹ ì •ê·œ í‘œí˜„ì‹ì˜ í•˜ìœ„ ì§‘í•©ì…ë‹ˆë‹¤. í•˜ì´í”ˆ(`-`)ê³¼ ì (`.`)ì€ ë¬¸ìì—´ ê¸°ë°˜ ê²½ë¡œì— ì˜í•´ ë¬¸ì ê·¸ëŒ€ë¡œ í•´ì„ë©ë‹ˆë‹¤.



ë§Œì¼ pathì— ë‹¬ëŸ¬ë¬¸ì(`$`)ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤ë©´ `([` `])`ë‚´ì— ì´ìŠ¤ì¼€ì´í”„ ì²˜ë¦¬í•˜ì—¬ ë¬¶ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `/data/$book`ì˜ ìš”ì²­ì¸ ê²½ìš° pathëŠ” `/data/([\$])book`ì´ ë©ë‹ˆë‹¤.



> ExpressëŠ” Route pathë¥¼ ë§¤ì¹­í•˜ê¸° ìœ„í•´ [path-to-regexp](https://www.npmjs.com/package/path-to-regexp)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ê°€ëŠ¥í•œ ëª¨ë“  ê²½ë¡œì— ëŒ€í•œ ê²ƒë“¤ì€ ë¬¸ì„œë¥¼ í™•ì¸í•˜ì„¸ìš”. [Express Route Tester](https://forbeslindesay.github.io/express-route-tester/)ëŠ” íŒ¨í„´ ì¼ì¹˜ë¥¼ ì§€ì›í•˜ì§€ ì•Šì§€ë§Œ ê¸°ë³¸ Express ê²½ë¡œë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë° í¸ë¦¬í•œ ë„êµ¬ì…ë‹ˆë‹¤.



> ì¿¼ë¦¬ ë¬¸ìì—´ì€ Route pathì˜ ì¼ë¶€ê°€ ì•„ë‹™ë‹ˆë‹¤.



ë‹¤ìŒì€ ë¬¸ìì—´ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” Route pathì˜ ëª‡ê°€ì§€ ì˜ˆì…ë‹ˆë‹¤.



ì´ Route pathëŠ” ìš”ì²­ì„ ë£¨íŠ¸ ê²½ë¡œ(`/`)ì™€ ì¼ì¹˜ì‹œí‚µë‹ˆë‹¤.

```javascript
app.get('/', (req, res) => {
  res.send('root')
})
```



ì´ Route pathëŠ” ìš”ì²­ì„ ë£¨íŠ¸ ê²½ë¡œ(`/about`)ì™€ ì¼ì¹˜ì‹œí‚µë‹ˆë‹¤.

```javascript
app.get('/about', (req, res) => {
  res.send('about')
})
```



ì´ Route pathëŠ” ìš”ì²­ì„ `/random.text` ê³¼ ì¼ì¹˜ì‹œí‚µë‹ˆë‹¤.

```javascript
app.get('/random.text', (req, res) => {
  res.send('random.text')
})
```



ë‹¤ìŒì€ ë¬¸ìì—´ íŒ¨í„´ì„ ê¸°ë°˜ìœ¼ë¡œí•˜ëŠ” Route pathì˜ ëª‡ê°€ì§€ ì˜ˆì œ ì…ë‹ˆë‹¤.



ì´ Route pathëŠ” `acd`, `abcd`ì™€ ì¼ì¹˜í•©ë‹ˆë‹¤.

```javascript
// b? ì´ê¸° ë•Œë¬¸ì— bëŠ” ìˆì„ìˆ˜ë„ ìˆê³  ì—†ì„ìˆ˜ë„ ìˆë‹¤.
app.get('/ab?cd', (req, res) => {
  res.send('ab?cd')
})
```



ì´ Route pathëŠ” `abcd`, `abbcd`, `abbbcd`ë“±ê³¼ ì¼ì¹˜í•©ë‹ˆë‹¤.

```javascript
// b+ ëŠ” bê°€ 1ê°œ ì´ìƒë¶€í„° ì—¬ëŸ¬ê°œê¹Œì§€ ì˜¬ ìˆ˜ ìˆë‹¤. 
app.get('/ab+cd', (req, res) => {
  res.send('ab+cd')
})
```



ì´ ê²½ë¡œëŠ” `abcd`, `abxcd`, `abRANDOMcd`, `ab123cd`ë“±ê³¼ ì¼ì¹˜í•©ë‹ˆë‹¤.

```javascript
app.get('/ab*cd', (req, res) => {
  res.send('ab*cd')
})
```



ì´ ê²½ë¡œëŠ” `/abe`, `/abcde`ì™€ ì¼ì¹˜í•©ë‹ˆë‹¤.

```javascript
app.get('/ab(cd)?e', (req, res) => {
  res.send('ab(cd)?e')
})
```



ì •ê·œì‹ì„ ê¸°ë°˜ìœ¼ë¡œí•œ Route pathì˜ ì˜ˆë“¤...



ì´ Route pathëŠ” "a"ê°€ í¬í•¨ëœ ëª¨ë“  í•­ëª©ë“¤ê³¼ ì¼ì¹˜í•©ë‹ˆë‹¤.

```javascript
app.get(/a/, (req, res) => {
  res.send('/a/')
})
```



ì´ Route pathëŠ” `butterfly`, `dragonfly`ì™€ ì¼ì¹˜í•˜ì§€ë§Œ, `butterflyman`, `dragonflyman`ë“±ê³¼ëŠ” ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```javascript
app.get(/.*fly$/, (req, res) => {
  res.send('/.*fly$/')
})
```



## Route parameters

Route parametersëŠ” URLì˜ í•´ë‹¹ ìœ„ì¹˜ì— ì§€ì •ëœ ê°’ì„ ìº¡ì³í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” ëª…ëª…ëœ URL segmentì…ë‹ˆë‹¤. ìº¡ì³ëœ ê°’ì€ í•´ë‹¹ í‚¤ë¡œ ê²½ë¡œì— ì§€ì •ëœ route parameterì˜ ì´ë¦„ìœ¼ë¡œ `req.params`ê°œì²´ì— ì±„ì›Œì§‘ë‹ˆë‹¤.

>âœ¨ route pathì— `:userId`ì™€ `:bookId`ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì •ì˜í•´ ë‘ì—ˆê¸° ë•Œë¬¸ì—, Request ê°ì²´ì˜ paramsë¥¼ í™•ì¸í•´ ë³´ë©´ ê·¸ì™€ ë™ì¼í•œ ì´ë¦„ìœ¼ë¡œ ê°’ì´ ë“¤ì–´ê°€ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 
>
>
>
>Route path : /users/:userId/books/:bookId
>
>Request URL : http://localhost:3000/users/34/books/8989
>
>req.params : { "userId": "34", "bookId": "8989" }



Route parametersë¥¼ ì‚¬ìš©í•´ì„œ Routeë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ì„œëŠ”, ì•„ë˜ì™€ ê°™ì´ Route pathì— Route parameterë¥¼ ì§€ì •í•˜ê¸°ë§Œ í•˜ë©´ë©ë‹ˆë‹¤.

> ì¼ì„ ì²˜ìŒ ì‹œì‘í• ë•Œ URLì— í¬í•¨ë˜ì–´ìˆëŠ”, `query string`ê³¼ `query parameter`ë¥¼ í—¤ê¹”ë ¸ëŠ”ë°, ì´ ì„¤ëª…ì„ ì˜ ì´í•´í•˜ê³  ë„˜ì–´ê°€ë©´ ê·¸ëŸ´ì¼ì´ ì—†ì—ˆì„ ê²ƒ ê°™ë‹¤. ( ë‹¹ì‹œì— ë‚˜ëŠ” expressê°€ì´ë“œë¥¼ ë³´ì§€ ì•Šê³ , ë°”ë¡œ nest.jsì— ê´€í•œ ì±…ì„ í•œ ê¶Œ ë³´ê³  ì‹œì‘í–ˆë‹¤. ì§€ê¸ˆ ë‹¤ì‹œí•œë²ˆ ëŒì•„ë³´ë‹ˆ ì¡°ê¸ˆë” ì´í•´ê°€ ì˜ ë˜ëŠ” ê²ƒ ê°™ë‹¤. )

```javascript
app.get('/users/:userId/books/:bookId', (req, res) => {
  res.send(req.params) // ğŸš¨ req.paramsì— ë„˜ì–´ì˜¨ ê°’ì„ ê°€ì§€ê³  dbì˜ ì¡°íšŒê°’ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë“±... ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. 
})
```



> Route parameterì˜ ì´ë¦„ì€ "ë‹¨ì–´ ë¬¸ì"([A-Za-z0-9_])ë¡œ êµ¬ì„±ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.



í•˜ì´í”ˆ(`-`)ê³¼ ì (`.`)ì€ ë¬¸ì ê·¸ëŒ€ë¡œ í•´ì„ë˜ë¯€ë¡œ ìœ ìš©í•œ ëª©ì ìœ¼ë¡œ ê²½ë¡œ ë§¤ê°œë³€ìˆ˜ì™€ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

>Route path : /flights/:from-:to
>
>Request URL : http://localhost:3000/flights/LAX-SF0
>
>req.params : {"from": "LAX", "to": "SF0" }

>Route path : /plantae/:genus.:species
>
>Request URL : http://localhost:3000/plantae/Prunus.persica
>
>req.params : {"genus": "Prunus", "species": "persica"}



Route parametersì™€ ì¼ì¹˜í•  ìˆ˜ ìˆëŠ” ë” ì •í™•í•œ ë¬¸ìì—´ì„ íš¨ê³¼ì ìœ¼ë¡œ ì œì–´í•˜ë ¤ë©´ `( )`ì•ˆì— ì •ê·œì‹ì„ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.

>Route path : /user/:userId(\d+)
>
>Request URL : http://localhost:3000/user/42
>
>req.params: {"userId": "42"}



> ì •ê·œì‹ì€ ì¼ë°˜ì ìœ¼ë¡œ ë¦¬í„°ëŸ´ ë¬¸ìì—´ì˜ ì¼ë¶€ì´ë¯€ë¡œ ì¶”ê°€ ë°±ìŠ¬ë˜ì‹œë¥¼ ì‚¬ìš©í•˜ì—¬ `\` ë¬¸ìë¥¼ ì´ìŠ¤ì¼€ì´í”„í•´ì•¼ í•©ë‹ˆë‹¤(ì˜ˆ: `\\d+` ).



> Express 4.xì—ì„œ ì •ê·œì‹ì˜ `*` ë¬¸ìëŠ” ì¼ë°˜ì ì¸ ë°©ì‹ìœ¼ë¡œ í•´ì„ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í•´ê²° ë°©ë²•ìœ¼ë¡œ `*` ëŒ€ì‹  `{0,}`ì„ ì‚¬ìš©í•˜ì„¸ìš”. ì´ ë¬¸ì œëŠ” Express 5ì—ì„œ ìˆ˜ì •ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.
>
> ğŸš¨ ì •ê·œì‹ì„ ì‚¬ìš©í•´ì„œ Route parameterë¥¼ ì²˜ë¦¬í•œ ì ì´ ë‚œ ì—†ëŠ”ë°, ë‚˜ì¤‘ì— ì¼í•˜ë‹¤ê°€ ë³´ê²Œ ë˜ë©´ ì´ë¶€ë¶„ì„ ë‹¤ì‹œ í›‘ì–´ë³´ë©´ ë  ê²ƒ ê°™ë‹¤. 



## Route handlers

ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œ, [ë¯¸ë“¤ì›¨ì–´](https://expressjs.com/en/guide/using-middleware.html)ì²˜ëŸ¼ ì‘ë™í•˜ëŠ” ì—¬ëŸ¬ê°€ì§€ ì½œë°± í•¨ìˆ˜ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ ì¼í•œ ì˜ˆì™¸ëŠ” ì´ëŸ¬í•œ ì½œë°±ì´ ë‚˜ë¨¸ì§€ ê²½ë¡œì˜ ì½œë°±ì„ ìš°íšŒí•˜ê¸° ìœ„í•´ `next('route')`ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ë©”ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ê²½ë¡œì— ì‚¬ì „ì— í•„ìš”í•œ ì¡°ê±´ë“¤ì„ ì ìš©í•œ ë‹¤ìŒì— í˜„ì¬ ê²½ë¡œ(route)ë¥¼ ì§„í–‰í•  ì´ìœ ê°€ ì—†ë‹¤ë©´ ë‹¤ìŒ(í›„ì†)ê²½ë¡œë¡œ ì œì–´ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



Route handlersëŠ” ë‹¤ìŒ ì˜ˆì œì™€ ê°™ì´, í•¨ìˆ˜ ë°°ì—´ ë˜ëŠ” ë‘ ê°€ì§€ì˜ ì¡°í•© í˜•íƒœì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.



ë‹¨ì¼ ì½œë°± í•¨ìˆ˜ë¡œëŠ” Routeë¥¼ ì•„ë˜ì™€ ê°™ì´ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´...

```javascript
app.get('/example/a', (req, res) => {
  res.send('Hello from A!')
})
```



ë‘˜ ì´ìƒì˜ ì½œë°± í•¨ìˆ˜ê°€ íŠ¹ì • Routeë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.(`next` ê°ì²´ë¥¼ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤!) ì˜ˆë¥¼ ë“¤ì–´...

```javascript
app.get('/example/b', (req, res, next) => {
  console.log('ë‹¤ìŒ functionì— ì˜í•´ ì‘ë‹µì€ ì „ì†¡ë  ê²ƒì…ë‹ˆë‹¤~')
  next()
}, (req, res) => {
  res.send('Hello From B!!!')
})
```



ì½œë°± í•¨ìˆ˜ì˜ ë°°ì—´ë¡œ ì²˜ë¦¬í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´...

```javascript
const callback0 = function (req, res, next) {
  console.log('CB0')
  next()
}

const callback1 = function (req, res, next) {
  console.log('CB1')
  next()
}

const callback2 = function (req, res) {
  res.send('Hello From C!!!')
}

app.get('/example/c', [callback0, callback1, callback2])
```



ë…ë¦½ì ì¸ í•¨ìˆ˜ë“¤ê³¼ í•¨ìˆ˜ ë°°ì—´ì˜ ì¡°í•©ìœ¼ë¡œë„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´...

```javascript
const callback0 = function (req, res, next) {
  console.log('CB0')
  next()
}

const callback1 = function (req, res, next) {
  console.log('CB1')
  next()
}

app.get('/example/d', [callback0, callback1], (req, res, next) => {
  console.log('ë‹¤ìŒ functionì— ì˜í•´ ì‘ë‹µì€ ì „ì†¡ë  ê²ƒì…ë‹ˆë‹¤~')
  next()
}, (req, res) => {
  res.send('Hello From D!!!')
})
```



## Response methods

ë‹¤ìŒ í‘œì˜ ì‘ë‹µ ê°ì²´(`res`)ì— ëŒ€í•œ ë©”ì„œë“œëŠ” í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µì„ ë³´ë‚´ê³ , ìš”ì²­-ì‘ë‹µ cycleì„ ì¢…ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Route Handlerì—ì„œ ì´ëŸ¬í•œ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì§€ ì•Šìœ¼ë©´ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì´ ì¤‘ë‹¨ëœ ìƒíƒœë¡œ ìœ ì§€ë©ë‹ˆë‹¤.

![image-20240923122837005](../assets/img/image-20240923122837005.png)



## app.route()

`app.router()`ë¥¼ ì‚¬ìš©í•˜ì—¬ Route pathì— ëŒ€í•œ ì—°ê²°ê°€ëŠ¥í•œ Route handlerë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²½ë¡œê°€ ë‹¨ì¼ ìœ„ì¹˜ì— ì§€ì •ë˜ê¸° ë•Œë¬¸ì— ëª¨ë“ˆì‹ ê²½ë¡œë¥¼ ë§Œë“œëŠ”ê²ƒì— ë„ì›€ì´ ë˜ë©° ì¤‘ë³µì„±ê³¼ ì˜¤íƒ€ë„ ì¤„ì–´ë“­ë‹ˆë‹¤. ì´ì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…ì€ [Router() documentation](https://expressjs.com/en/4x/api.html#router)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”!



ë‹¤ìŒì€ `app.route()`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ì˜ëœ chained route handlerì˜ ì˜ˆì œì…ë‹ˆë‹¤.

```javascript
app.route('/book')
  .get((req, res) => {
    res.send('Get a random book')
  })
  .post((req, res) => {
    res.send('Add a book')
  })
  .put((req, res) => {
    res.send('Update the book')
  })
```



## express.Router

ëª¨ë“ˆì‹ìœ¼ë¡œ ë§ˆìš´íŠ¸ê°€ ê°€ëŠ¥í•œ Route handlerë¥¼ ìƒì„±í•˜ë ¤ë©´ `express.Router` í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”. `Router` ì¸ìŠ¤í„´ìŠ¤ëŠ” ì™„ì „í•œ ë¯¸ë“¤ì›¨ì–´ ë° ë¼ìš°íŒ… ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ì´ìœ ë“¤ë¡œ, ì¢…ì¢… ì´ëŠ” "mini-app"ì´ë¼ê³  ë¶ˆë¦½ë‹ˆë‹¤.



ë‹¤ìŒ ì˜ˆì—ì„œëŠ” ë¼ìš°í„°ë¥¼ ëª¨ë“ˆë¡œ ìƒì„±í•˜ê³ , ê·¸ ì•ˆì— ë¯¸ë“¤ì›¨ì–´ ê¸°ëŠ¥ì„ ë¡œë“œí•˜ê³ , ì¼ë¶€ ê²½ë¡œë¥¼ ì •ì˜í•˜ê³ , ê¸°ë³¸ ì•±ì˜ ê²½ë¡œì— ë¼ìš°í„° ëª¨ë“ˆì„ íƒ‘ì¬í•©ë‹ˆë‹¤.



ì•± ë””ë ‰í† ë¦¬ì— ë‹¤ìŒ ë‚´ìš©ìœ¼ë¡œ `birds.js`ë¼ëŠ” ë¼ìš°í„° íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤.

```javascript
const express = require('express')
const router = express.Router()

// middleware that is specific to this router
const timeLog = (req, res, next) => {
  console.log('Time: ', Date.now())
  next()
}
router.use(timeLog)

// define the home page route
router.get('/', (req, res) => {
  res.send('Birds home page')
})
// define the about route
router.get('/about', (req, res) => {
  res.send('About birds')
})

module.exports = router
```



ê·¸ ë‹¤ìŒ app.js(ë£¨íŠ¸íŒŒì¼)ì—ì„œ ë¼ìš°í„° ëª¨ë“ˆì„ ë¡œë“œí•©ë‹ˆë‹¤.

```javascript
const birds = require('./birds')

// ...
app.use('/birds', birds)
```



ì´ì œ ì•±ì€ `/birds` ë° `/birds/about` ì— ëŒ€í•œ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ í•´ë‹¹ ê²½ë¡œì™€ ê´€ë ¨ëœ `timeLog` ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



ê·¸ëŸ¬ë‚˜ ìƒìœ„ ê²½ë¡œ `/birds`ì— path parameterê°€ ìˆëŠ” ê²½ìš°, ê¸°ë³¸ì ìœ¼ë¡œ í•˜ìœ„ ê²½ë¡œì—ì„œ ì•¡ì„¸ìŠ¤ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì•¡ì„¸ìŠ¤ê°€ ê°€ëŠ¥í•˜ê²Œ í•˜ë ¤ë©´ `mergeParams`ì˜µì…˜ì„ Router ìƒì„±ì ì°¸ì¡°ì— ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤.

```javascript
const router = express.Router({ mergeParams: true })
```
